<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Никита & Ирина</title>
    <link rel="stylesheet" href="style.css" />
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
</head>
<body>

    <!-- БЛОК 1 — ДВЕРИ -->
    <section class="block1">
    <div class="text-above">
        <p class="subtitle">Отвори двери <br>в сказку</p>
    </div>
    <div class="door-container" id="door-container">
        <img src="images/frame.png" alt="" class="frame">
        <img src="images/left.jpg" alt="" class="door door-left">
        <img src="images/right.jpg" alt="" class="door door-right">
        <img src="images/photo.jpg" alt="" class="photo">
    </div>
</section>

    <!-- БЛОК 2 — Никита & Ирина -->
    <section class="block2">
        <div class="date-block">
            <span class="month">АВГУСТА</span>
            <span class="day">15</span>
            <span class="year">2026</span>
        </div>

        <div class="names-container">
            <div class="big-letter">Н</div>
            <div class="big-letter_i">И</div>
            <h1 class="name-nikita">Никита</h1>
            <h1 class="name-irina">Ирина</h1>
        </div>

        <div class="photo-container">
            <img src="images/kitandoirosh.png" alt="Никита и Ирина" class="couple-photo">
        </div>

        <!-- ДЕКОР: ЛИСТЬЯ, ГРАНАТ, ЦВЕТОК -->
        <!-- <div class="decor">
            <img src="images/sheet_left.png" alt="Листья слева" class="leaves-left">
            <img src="images/sheet_right.PNG" alt="Листья справа" class="leaves-right">
            
            <img src="images/garnet.png" alt="Гранат" class="pomegranate">
        </div> -->
    </section>

    <!-- БЛОК 3 — Глава 1 -->
    <section class="block3">
    <h2>Глава 1</h2>

    <!-- Первая буквица "Н" + текст -->
    <div class="dropcap-section">
        <p>
            <span class="dropcap">Н</span>е за тридевять земель и не у подножья Арарата, а здесь, в мире тепла и чудес,<br> жил да был Царевич Никита.
            
            Долго коротал он свои дни в одиночестве, думу думал, глядел в даль светлую – и понял: <br> пора жениться. Но жену надобно было сыскать не простую, а самую, что ни на есть <br>очаровательную, чтобы сердце запело, а душа развернулась. И повстречал Никита свою Ирину: <br> она – яркая, как закат в персиковой долине, а он рядом с ней – как нежный рассвет над русскими далями. С той самой встречи их сердца, как нити в узоре, сплелись в одну судьбу крепко-накрепко.
        </p>
    </div>

    <!-- Фото по центру -->
    <div class="block3-photo1">
        <img src="images/block3.png" alt="Фото в главе" class="block3-photo">
    </div>

    <!-- Вторая буквица "И" + текст -->
    <div class="dropcap-section">
        <p>
            <span class="dropcap">И</span> вот настал день долгожданный – собрать гостей честных, да друзей сердечных,<br> отметить пир во славу любви великой. 
            
            что сильна, как в русских сказках, а счастье – как пир длится вечно. В избушке, где травы шепчут, а ветер играет в солнечных бликах, на светлой веранде, где ткани колышутся, а гранаты алым украшают стол, будут ждать вас наши молодые – с открытым сердцем, с добрым словом и мечтой на двоих
        </p>
    </div>
</section>

<!-- БЛОК 4 -->
<section class="block4">
    <div class="photo4">
        <img src="images/block4.png" alt="" class="photo4">
    </div>
    
    <div class="form">
        <img src="images/form.png" alt="" class="form">
        
        <p class="zagolovok">Пир на<br>весь мир!</p>
        
        <p class="adres">
            Ждем вас 15 августа в 18:00<br>
            по адресу:<br>
            Ст Авиатор 2,<br>
            ул. Полевая д.401<br>
            
        </p>
        
        <a href="https://yandex.ru/maps/-/CLHKqZ2A" class="carta-btn" target="_blank" rel="noopener">
            На карту
        </a>
    </div>
</section>

<!-- БЛОК 5  -->
    <section class="block5">
    
        <div class="row">
            <div class="hb5">Сказка станет<br>явью</div>
            <p><br></p>
            <p class="p5"> если вы, как добрые гости, <br>поддержите наряд вечерний</p>
        </div>
        <div class="dresscode">
            <img src="images/1.png" alt="" class="dresscode_1">
            <img src="images/2.png" alt="" class="dresscode_2">
            <img src="images/3.png" alt="" class="dresscode_3">
            <img src="images/4.png" alt="" class="dresscode_4">
        </div>
        

</section>

<!-- БЛОК 6  -->
   <section class="block6">
    <div class="ram">
        <img src="images/bl5.png" alt="Рамка" class="ram-img">
    </div>

    <h2 class="countdown-title">До встречи через...</h2>

    <!-- ОБРАТНЫЙ ОТСЧЁТ -->
    <div class="countdown-container">
        <div class="countdown-inline">
            <span id="days">00</span> :
            <span id="hours">00</span> :
            <span id="minutes">00</span> :
            <span id="seconds">00</span>
        </div>
        <div class="labels">
    <span>Дней</span>
    <span>Часов</span>
    <span>Минут</span>
    <span>Секунд</span>
</div>


        <p><br></p>
    </div>
</section>

    <!-- БЛОК 7  -->
    <section class="block7">
    <div class="zag7">
        <h2>Анкета</h2>
    </div>
    <div class="par7">
        <p>Для того чтобы подготовиться <br> к торжеству и обеспечить комфорт всех <br>присутствующих, мы просим вас заполнить <br>нашу анкету</p>
    </div>

    <!-- ФОРМА АНКЕТЫ -->
    <form id="rsvp-form" class="rsvp-form">
        <!-- 1. ИМЯ ФАМИЛИЯ -->
        <div class="form-group">
            <!-- <label for="name">Введите имя и фамилию *</label> -->
            <input type="text" id="name" name="name" required placeholder="Ваше имя">
        </div>

        <!-- 2. ТЕЛЕФОН -->
        <div class="form-group">
            <label for="phone">Введите свой номер телефона </label>
            <input type="tel" id="phone" name="phone" required placeholder="+7 (999) 123-45-67">
        </div>

        <!-- 3. ПОДТВЕРЖДЕНИЕ ПРИСУТСТВИЯ -->
        <div class="form-group">
            <label>Подтвердите своё присутствие </label>
            <div class="radio-group">
                <label><input type="radio" name="attendance" value="yes" required> Да, я с радостью приду</label>
                <label><input type="radio" name="attendance" value="no"> К сожалению, не смогу присутствовать</label>
            </div>
        </div>

        <!-- 4. С ПАРОЙ? -->
        <div class="form-group">
            <label class="label1">Вы будете с парой? (Если да, то укажите имя)</label>
            <div class="radio-group">
                <label><input type="radio" name="with_pair" value="no" checked> Нет</label>
                <label><input type="radio" name="with_pair" value="yes"> Да</label>
            </div>
            <div id="pair-name-group" style="display: none; margin-top: 0.5rem;">
                <input type="text" id="pair-name" name="pair_name" placeholder="Имя вашей пары">
            </div>
        </div>

        <!-- КНОПКА ОТПРАВИТЬ -->
        <div class="submit-button-wrapper">
            <button type="submit" class="submit-btn">Отправить</button>
        </div>
        <p class="form-status"></p>
    </form>
</section>

    <script>
    // Конечная дата: 15 августа 2026 года, 18:00:00
    const countdownDate = new Date('2026-08-15T18:00:00').getTime();

    const updateCountdown = () => {
        const now = new Date().getTime();
        const distance = countdownDate - now;

        // Если время уже прошло
        if (distance < 0) {
            document.querySelector('.countdown-inline').innerHTML = '<h3>Свадьба уже идёт!</h3>';
            return;
        }

        const days = Math.floor(distance / (1000 * 60 * 60 * 24));
        const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);

        document.getElementById('days').textContent = days;
        document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
        document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
        document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
    };

    // Обновляем сразу и потом каждую секунду
    updateCountdown();
    setInterval(updateCountdown, 1000);
</script>


    

    setInterval(updateCountdown, 1000);
    updateCountdown();
</script>


<script>
    const BOT_TOKEN = '8594118195:AAHVJbFvLDrMfXIsXmgsWBezB-7V3VKNJxg';
    const CHAT_ID = '930813414';

    // ЭКРАНИРОВАНИЕ СПЕЦСИМВОЛОВ (ВКЛЮЧАЯ !)
    function escapeMarkdown(text) {
        return text.replace(/([_*[\]()~`>#+\-=|{}.!])/g, '\\$1');
    }

    // Показать/скрыть имя пары
    document.querySelectorAll('input[name="with_pair"]').forEach(radio => {
        radio.addEventListener('change', function() {
            const pairNameGroup = document.getElementById('pair-name-group');
            pairNameGroup.style.display = this.value === 'yes' ? 'block' : 'none';
        });
    });

    // Отправка формы
    document.getElementById('rsvp-form').addEventListener('submit', async function(e) {
        e.preventDefault();
        const status = document.querySelector('.form-status');
        status.textContent = 'Отправляем...';
        status.style.color = '#8b0e0e';

        const formData = new FormData(this);
        const data = {
            name: formData.get('name').trim(),
            phone: formData.get('phone').trim(),
            attendance: formData.get('attendance') === 'yes' ? 'Приду' : 'Не смогу',
            with_pair: formData.get('with_pair') === 'yes' ? 'Да' : 'Нет',
            pair_name: formData.get('pair_name')?.trim() || '—'
        };

        const message = `
*Новая анкета RSVP\\!*

*Имя:* ${escapeMarkdown(data.name)}
*Телефон:* ${escapeMarkdown(data.phone)}
*Присутствие:* ${data.attendance}
*С парой:* ${data.with_pair}
*Имя пары:* ${escapeMarkdown(data.pair_name)}
        `.trim();

        try {
            const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    chat_id: CHAT_ID,
                    text: message,
                    parse_mode: 'MarkdownV2'
                })
            });

            const result = await response.json();

            if (response.ok && result.ok) {
                status.textContent = 'Спасибо! Анкета отправлена.';
                status.style.color = '#8b0e0e';
                this.reset();
                document.getElementById('pair-name-group').style.display = 'none';
            } else {
                console.error('Telegram error:', result);
                status.textContent = 'Ошибка: ' + (result.description || 'Неизвестная ошибка');
                status.style.color = 'red';
            }
        } catch (err) {
            console.error('Network error:', err);
            status.textContent = 'Нет интернета. Проверьте подключение.';
            status.style.color = 'red';
        }
    });
</script>
<script>
// Ждём полной загрузки всех нужных картинок, потом открываем двери
document.addEventListener('DOMContentLoaded', () => {
    const doorContainer = document.getElementById('door-container');
    const imagesToLoad = [
        'images/frame.png',
        'images/left.jpg',
        'images/right.jpg',
        'images/photo.jpg'
    ];

    let loadedCount = 0;
    const totalImages = imagesToLoad.length;

    if (totalImages === 0) {
        doorContainer.classList.add('open');
        return;
    }

    imagesToLoad.forEach(src => {
        const img = new Image();
        img.src = src;
        img.onload = img.onerror = () => {
            loadedCount++;
            if (loadedCount === totalImages) {
                // Все картинки загрузились — открываем двери с небольшой задержкой для красоты
                setTimeout(() => {
                    doorContainer.classList.add('open');
                }, 300); // 0.3 секунды после загрузки
            }
        };
    });
});

// По-прежнему оставляем открытие по клику/тапу (удобно на мобильных)
document.querySelector('.door-container').addEventListener('click', function() {
    this.classList.add('open');
});
</script>
</body>
</html>